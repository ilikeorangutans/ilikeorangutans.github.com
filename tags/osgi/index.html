<!doctype html><html><head><meta charset=utf-8><title>OSGI &mdash;
Jakob Külzer</title><meta name=author value="Jakob Külzer"><meta property="og:title" content="OSGI"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://ilikeorangutans.github.io/tags/osgi/"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://ilikeorangutans.github.io/tags/osgi/index.xml title="Jakob Külzer"><link rel=stylesheet href=/css/output.css><link rel=canonical href=https://ilikeorangutans.github.io/></head><body class="bg-gray-50 text-gray-900"><header class="bg-white shadow-sm border-b"><div class="max-w-4xl mx-auto px-4 py-6"><nav class="flex justify-between items-center"><a href=/ class=navbar-brand><h1 class="text-2xl font-bold text-teal-900 hover:text-orange-400 transition-colors">Jakob Külzer</h1></a><div class=space-x-6><a href=/ class="text-gray-600 hover:text-orange-400 transition-colors">Home</a>
<a href=/posts/ class="text-gray-600 hover:text-orange-400 transition-colors">Blog</a>
<a href=/projects/ class="text-gray-600 hover:text-orange-400 transition-colors">Projects</a>
<a href=/about/ class="text-gray-600 hover:text-orange-400 transition-colors">About</a></div></nav></div></header><main class="max-w-4xl mx-auto px-4 py-8"><h1>OSGI</h1><p>&#8617; <a href=/tags>all tags</a></p><p>Pages tagged with "OSGI":</p><article class="bg-white rounded-lg shadow-sm mb-8 overflow-hidden"><div class=p-6><h2 class="text-3xl font-bold text-gray-900 mb-4 hover:text-teal-600 transition-colors"><a href=/2013/02/27/osgi-guice-and-peaberry-first-steps/>OSGI, Guice, and Peaberry: first steps</a></h2><div class="flex items-center space-x-4 text-sm text-gray-500 mb-3"><time datetime=2013-02-27>27 Feb 2013
</time><span>3 min read</span><div class="flex items-center"><div class="flex flex-wrap gap-2"><a href=/tags/osgi class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">OSGI
</a><a href=/tags/guice class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Guice
</a><a href=/tags/peaberry class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Peaberry
</a><a href=/tags/java class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Java</a></div></div></div><div class=prose><p class="text-gray-600 text-lg leading-relaxed mb-4"><h2 id=introduction>Introduction</h2><p>I&rsquo;ve been trying to get <a href=https://code.google.com/p/google-guice/>Google Guice</a> and <a href=https://code.google.com/p/peaberry/>Peaberry</a> to work in my OSGI projects for a while. Google Guice is a great dependency injection framework, and Peaberry promises to bridge the gap between OSGI services and dependency injection.</p><p>However, getting Peaberry to work was not trivial, mostly because there aren&rsquo;t many docs and the quality of the docs is somewhat lacking. The best piece is still this pdf <a href="https://code.google.com/p/peaberry/downloads/detail?name=peaberry%20-%20blending%20services%20and%20extensions.pdf">Peaberry - blending services and extensions</a>, but it&rsquo;s a lot of information in very little space.</p></p></div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"></div><a href=/2013/02/27/osgi-guice-and-peaberry-first-steps/ class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Read more →</a></div></div></article><article class="bg-white rounded-lg shadow-sm mb-8 overflow-hidden"><div class=p-6><h2 class="text-3xl font-bold text-gray-900 mb-4 hover:text-teal-600 transition-colors"><a href=/2013/02/06/type-incompatibility-with-maven-scr-plugin/>Type Incompatibility With Maven SCR Plugin</a></h2><div class="flex items-center space-x-4 text-sm text-gray-500 mb-3"><time datetime=2013-02-06>6 Feb 2013
</time><span>1 min read</span><div class="flex items-center"><div class="flex flex-wrap gap-2"><a href=/tags/osgi class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">OSGI
</a><a href=/tags/maven class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Maven
</a><a href=/tags/scr class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">SCR</a></div></div></div><div class=prose><p class="text-gray-600 text-lg leading-relaxed mb-4"><p>Yesterday I ran into a most strange error when compiling one of my OSGI bundles:</p><pre><code>[ERROR] Failed to execute goal org.apache.felix:maven-scr-plugin:1.7.4:scr (generate-scr-scrdescriptor) on project XXX: A type incompatibility occured while executing org.apache.felix:maven-scr-plugin:1.7.4:scr: com.thoughtworks.qdox.model.Annotation cannot be cast to java.util.List
</code></pre><p>I saw several variations of that error and was initially clueless as how to fix it. However, I eventually found the problem:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#ff8000;font-weight:700>@Service</span>(value<span style=color:#cbcbcb> </span><span style=color:#2c5dcd>=</span><span style=color:#cbcbcb> </span>{<span style=color:#cbcbcb> </span>MyService.<span style=color:#2c5dcd;font-style:italic>class</span>,<span style=color:#cbcbcb> </span>ManagedService.<span style=color:#2c5dcd;font-style:italic>class</span><span style=color:#cbcbcb> </span>})<span style=color:#cbcbcb>
</span></span></span><span style=display:flex><span><span style=color:#cbcbcb></span><span style=color:#ff8000;font-weight:700>@Component</span>(immediate<span style=color:#cbcbcb> </span><span style=color:#2c5dcd>=</span><span style=color:#cbcbcb> </span><span style=color:#2c5dcd;font-weight:700>true</span>)<span style=color:#cbcbcb>
</span></span></span><span style=display:flex><span><span style=color:#cbcbcb></span><span style=color:#ff8000;font-weight:700>@Properties</span>(<span style=color:#ff8000;font-weight:700>@Property</span>(name<span style=color:#cbcbcb> </span><span style=color:#2c5dcd>=</span><span style=color:#cbcbcb> </span><span style=color:#0c6>&#34;foo&#34;</span>,<span style=color:#cbcbcb> </span>value<span style=color:#cbcbcb> </span><span style=color:#2c5dcd>=</span><span style=color:#cbcbcb> </span><span style=color:#0c6>&#34;bar&#34;</span>))<span style=color:#cbcbcb>
</span></span></span><span style=display:flex><span><span style=color:#cbcbcb></span><span style=color:#2c5dcd;font-weight:700>public</span><span style=color:#cbcbcb> </span><span style=color:#2c5dcd;font-weight:700>class</span> <span style=text-decoration:underline>NissanAutoDataUrlGenerator</span><span style=color:#cbcbcb> </span><span style=color:#2c5dcd;font-weight:700>implements</span><span style=color:#cbcbcb> </span>ManagedService<span style=color:#cbcbcb> </span>{<span style=color:#cbcbcb> </span>}</span></span></code></pre></div><p>The mistake is that the <code>@Properties</code> annotation takes an array as it&rsquo;s parameter. Eclipse does not mark the above as an error, however, the Maven plugin is not happy about it. Here&rsquo;s the correct code:</p></p></div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"></div><a href=/2013/02/06/type-incompatibility-with-maven-scr-plugin/ class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Read more →</a></div></div></article><article class="bg-white rounded-lg shadow-sm mb-8 overflow-hidden"><div class=p-6><h2 class="text-3xl font-bold text-gray-900 mb-4 hover:text-teal-600 transition-colors"><a href=/2012/11/20/apache-sling-resource-resolver-rule-priority-explained/>Apache Sling Resource Resolver Rules in a Nutshell</a></h2><div class="flex items-center space-x-4 text-sm text-gray-500 mb-3"><time datetime=2012-11-20>20 Nov 2012
</time><span>4 min read</span><div class="flex items-center"><div class="flex flex-wrap gap-2"><a href=/tags/apache-sling class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Apache Sling
</a><a href=/tags/jcr class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">JCR
</a><a href=/tags/osgi class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">OSGI
</a><a href=/tags/regexp class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Regexp
</a><a href=/tags/cq5 class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">CQ5
</a><a href=/tags/adobe-wem class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Adobe WEM</a></div></div></div><div class=prose><p class="text-gray-600 text-lg leading-relaxed mb-4"><p>If you work with Apache Sling, you have probably encountered the ResourceResolver and its configuration rules.
In short, the ResourceResolver is the part of Sling that resolves incoming requests to actual or virtual
resources. For example, if a request for <code>/foo/bar</code> is coming in the resolver will resolve that to a
corresponding node in the JCR. However, sometimes it is not desireable to expose the internal structure of the
repository or the required external structure cannot be represented using the JCR. In that case the resolver
can be customized by installing resolver rules. Resolver rules can be modified via the OSGI configuration
editor or the OSGI ConfigurationAdmin.</p></p></div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"></div><a href=/2012/11/20/apache-sling-resource-resolver-rule-priority-explained/ class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Read more →</a></div></div></article><article class="bg-white rounded-lg shadow-sm mb-8 overflow-hidden"><div class=p-6><h2 class="text-3xl font-bold text-gray-900 mb-4 hover:text-teal-600 transition-colors"><a href=/2012/11/14/commons-logging-in-osgi-environments/>commons-logging in OSGI Environments</a></h2><div class="flex items-center space-x-4 text-sm text-gray-500 mb-3"><time datetime=2012-11-14>14 Nov 2012
</time><span>2 min read</span><div class="flex items-center"><div class="flex flex-wrap gap-2"><a href=/tags/osgi class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">OSGI
</a><a href=/tags/java class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Java
</a><a href=/tags/commons-logging class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">commons-logging
</a><a href=/tags/commons-httpclient class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">commons-httpclient
</a><a href=/tags/pax-logging class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Pax Logging</a></div></div></div><div class=prose><p class="text-gray-600 text-lg leading-relaxed mb-4"><p>While working on a small toy project using Apache Felix and commons-httpclient, I kept running into the issue that there is no official OSGI bundle for Apache commons-logging out there. While most Apache commons projects either provide simple bundles or full blown OSGI implementations with Activators and Services, commons-logging is an interesting exception. If you scan the <a href=http://wiki.apache.org/commons/CommonsOsgi>Commons OSGI status page</a>, you will notice that there is no OSGI version for commons-logging available, and a separate section to explain why. I haven&rsquo;t dug into why and how it conflicts with the OSGI classloading scheme, but I can see that being a problem. Be it as it may, there is no official OSGI bundle for commons logging.</p></p></div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"></div><a href=/2012/11/14/commons-logging-in-osgi-environments/ class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Read more →</a></div></div></article><article class="bg-white rounded-lg shadow-sm mb-8 overflow-hidden"><div class=p-6><h2 class="text-3xl font-bold text-gray-900 mb-4 hover:text-teal-600 transition-colors"><a href=/2012/10/23/osgi-bootstrapping/>OSGI Bootstrapping</a></h2><div class="flex items-center space-x-4 text-sm text-gray-500 mb-3"><time datetime=2012-10-23>23 Oct 2012
</time><span>2 min read</span><div class="flex items-center"><div class="flex flex-wrap gap-2"><a href=/tags/osgi class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">OSGI
</a><a href=/tags/java class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Java</a></div></div></div><div class=prose><p class="text-gray-600 text-lg leading-relaxed mb-4"><p>I&rsquo;ve been working with OSGI based technology for a while now and it&rsquo;s a great piece of technology. However, so far I&rsquo;ve only worked with OSGI technology that runs in existing instances of the framework. A running framework is easy to deal with, but how do you get to this point? I spent some time today playing with that, and it took me a while to put it all together. So naturally, I&rsquo;ll have to record my findings here.</p></p></div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"></div><a href=/2012/10/23/osgi-bootstrapping/ class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Read more →</a></div></div></article><article class="bg-white rounded-lg shadow-sm mb-8 overflow-hidden"><div class=p-6><h2 class="text-3xl font-bold text-gray-900 mb-4 hover:text-teal-600 transition-colors"><a href=/2012/10/12/osgi-classloading-reading-list/>OSGI Classloading Reading List</a></h2><div class="flex items-center space-x-4 text-sm text-gray-500 mb-3"><time datetime=2012-10-12>12 Oct 2012
</time><span>1 min read</span><div class="flex items-center"><div class="flex flex-wrap gap-2"><a href=/tags/java class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Java
</a><a href=/tags/osgi class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">OSGI
</a><a href=/tags/reading-list class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Reading List</a></div></div></div><div class=prose><p class="text-gray-600 text-lg leading-relaxed mb-4"><p>I&rsquo;ve been doing a lot of reading on how OSGI handles class loading. I&rsquo;m starting to fully understand and leverage OSGI and I&rsquo;m trying to keep my framework <a href=https://github.com/ilikeorangutans/omf>Object Mapper</a> as compatible with OSGI as I can.</p><p>In OSGI classloading is very restricted, similar to what happens in enterprisy Java application servers, and completely unlike traditional Java applications where everything shares a single classloader. In OSGI each bundle has its own classloader and what is visible accross the bundle boundaries is subject to strict export rules. In order to use a class outside of a bundle you&rsquo;ll have to explicitly declare its package as exported. There are many benefits to this strict architecture, clean architectures, reusable components and the ability to update bundles at runtime are probably the most important ones.</p></p></div><div class="flex items-center justify-between"><div class="flex items-center space-x-2"></div><a href=/2012/10/12/osgi-classloading-reading-list/ class="text-teal-600 hover:text-teal-800 font-medium transition-colors">Read more →</a></div></div></article></main><footer class="bg-white border-t mt-12"><div class="max-w-4xl mx-auto px-4 py-8"><div class="text-center text-gray-600"><p>&copy; 2025 Jakob Külzer. All rights reserved.</p><div class="mt-4 space-x-6"><a href=mailto:jakob.kuelzer@gmail.com class="hover:text-teal-600 transition-colors">Email</a>
<a href=https://github.com/ilikeorangutans target=_blank class="hover:text-teal-600 transition-colors">Github</a>
<a href=https://sr.ht/~ilikeorangutans/ target=_blank class="hover:text-teal-600 transition-colors">Sourcehut</a>
<a href=https://www.linkedin.com/in/jakobkuelzer/ target=_blank class="hover:text-teal-600 transition-colors">LinkedIn</a>
<a href=https://ilikeorangutans.github.io/tags/osgi/index.xml target=_blank class="hover:text-teal-600 transition-colors">RSS</a></div></div></div></footer></body></html>