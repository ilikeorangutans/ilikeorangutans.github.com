<!doctype html><html><head><meta charset=utf-8><title>gorename and invalid expression &mdash;
Jakob Külzer</title><meta name=author value="Jakob Külzer"><meta property="og:title" content="gorename and invalid expression"><meta property="og:description" content="This took me longer to figure out than I care to admit, so here&rsquo;s the solution.
The issue comes up when trying to use gorename:
$ gorename -from &#34;github.com/ilikeorangutans/foo&#34;.MyType -to 'MyBetterType'
gorename: -from &#34;github.com/ilikeorangutans/foo.MyType&#34;: invalid expression
Even though the from query looks normal, gorename just refuses to work. However the issue is not so much with gorename but rahter my shell, zsh. Turns out properly escaping your from query, fixes the issue:
$ gorename -from '&#34;github.com/ilikeorangutans/foo&#34;.MyType' -to 'MyBetterType'
Renamed 15 occurrences in 5 files in 1 package.
Notice the single quotes around the entire from parameter."><meta property="og:type" content="article"><meta property="og:url" content="https://ilikeorangutans.github.io/2015/10/23/gorename-and-invalid-expression/"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/output.css><link rel=canonical href=https://ilikeorangutans.github.io/></head><body class="bg-gray-50 text-gray-900"><header class="bg-white shadow-sm border-b"><div class="max-w-4xl mx-auto px-4 py-6"><nav class="flex justify-between items-center"><a href=/ class=navbar-brand><h1 class="text-2xl font-bold text-teal-900 hover:text-orange-400 transition-colors">Jakob Külzer</h1></a><div class=space-x-6><a href=/ class="text-gray-600 hover:text-orange-400 transition-colors">Home</a>
<a href=/posts/ class="text-gray-600 hover:text-orange-400 transition-colors">Blog</a>
<a href=/projects/ class="text-gray-600 hover:text-orange-400 transition-colors">Projects</a>
<a href=/about/ class="text-gray-600 hover:text-orange-400 transition-colors">About</a></div></nav></div></header><main class="max-w-4xl mx-auto px-4 py-8"><article class="bg-white rounded-lg shadow-sm overflow-hidden"><div class=p-6><div class="text-sm text-gray-500"><time datetime=2015-10-23>23 Oct 2015
</time><time datetime=2018-03-28>• updated 28 Mar 2018</time></div><h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4 leading-tight">gorename and invalid expression</h1><div class="flex items-center justify-between mb-8 pb-6 border-b border-gray-200"><div class="flex flex-wrap gap-2 mb-4"><a href=/tags/golang class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Golang
</a><a href=/tags/go class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Go
</a><a href=/tags/zsh class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">zsh
</a><a href=/tags/refactoring class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Refactoring</a></div></div><div class="prose prose-lg max-w-none"><p>This took me longer to figure out than I care to admit, so here&rsquo;s the solution.</p><p>The issue comes up when trying to use <a href=https://godoc.org/golang.org/x/tools/cmd/gorename>gorename</a>:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>$</span> gorename -from <span style=color:#0c6>&#34;github.com/ilikeorangutans/foo&#34;</span>.MyType -to <span style=color:#0c6>&#39;MyBetterType&#39;</span>
</span></span><span style=display:flex><span><span style=color:#aaa>gorename: -from &#34;github.com/ilikeorangutans/foo.MyType&#34;: invalid expression
</span></span></span></code></pre></div><p>Even though the <code>from</code> query looks normal, <code>gorename</code> just refuses to work. However the issue is not so much with <code>gorename</code> but rahter my shell, zsh. Turns out properly escaping your from query, fixes the issue:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-console data-lang=console><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>$</span> gorename -from <span style=color:#0c6>&#39;&#34;github.com/ilikeorangutans/foo&#34;.MyType&#39;</span> -to <span style=color:#0c6>&#39;MyBetterType&#39;</span>
</span></span><span style=display:flex><span><span style=color:#aaa>Renamed 15 occurrences in 5 files in 1 package.
</span></span></span></code></pre></div><p>Notice the single quotes around the entire <code>from</code> parameter.</p></div></div></article><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ilikeorangutans.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer class="bg-white border-t mt-12"><div class="max-w-4xl mx-auto px-4 py-8"><div class="text-center text-gray-600"><p>&copy; 2025 Jakob Külzer. All rights reserved.</p><div class="mt-4 space-x-6"><a href=mailto:jakob.kuelzer@gmail.com class="hover:text-teal-600 transition-colors">Email</a>
<a href=https://github.com/ilikeorangutans target=_blank class="hover:text-teal-600 transition-colors">Github</a>
<a href=https://sr.ht/~ilikeorangutans/ target=_blank class="hover:text-teal-600 transition-colors">Sourcehut</a>
<a href=https://www.linkedin.com/in/jakobkuelzer/ target=_blank class="hover:text-teal-600 transition-colors">LinkedIn</a></div></div></div></footer></body></html>