<!doctype html><html><head><meta charset=utf-8><title>null, Software Design, and Scala's Option &mdash;
Jakob Külzer</title><meta name=author value="Jakob Külzer"><meta property="og:title" content="null, Software Design, and Scala's Option"><meta property="og:description" content="For the past year or so I&rsquo;ve been writing a lot of Scala and fallen in love with its Option type and how it allows me to avoid nulls. I reflected on null, why they are bad, and how optional types allow you to write more expressive code.
What is null?
Most programming languages have the concept of null (or nil) that represents the absence of a given value or object. At it&rsquo;s surface the absence of a value probably just translates into a pointer of value 0x0 or in languages that do not zero variables, a pointer anywhere into the memory. But aside from the implementation details the more interesting question is how null fits into a language&rsquo;s type system."><meta property="og:type" content="article"><meta property="og:url" content="https://ilikeorangutans.github.io/2018/05/26/null-software-design-and-scalas-option/"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=stylesheet href=/css/output.css><link rel=canonical href=https://ilikeorangutans.github.io/></head><body class="bg-gray-50 text-gray-900"><header class="bg-white shadow-sm border-b"><div class="max-w-4xl mx-auto px-4 py-6"><nav class="flex justify-between items-center"><a href=/ class=navbar-brand><h1 class="text-2xl font-bold text-teal-900 hover:text-orange-400 transition-colors">Jakob Külzer</h1></a><div class=space-x-6><a href=/ class="text-gray-600 hover:text-orange-400 transition-colors">Home</a>
<a href=/posts/ class="text-gray-600 hover:text-orange-400 transition-colors">Blog</a>
<a href=/projects/ class="text-gray-600 hover:text-orange-400 transition-colors">Projects</a>
<a href=/about/ class="text-gray-600 hover:text-orange-400 transition-colors">About</a></div></nav></div></header><main class="max-w-4xl mx-auto px-4 py-8"><article class="bg-white rounded-lg shadow-sm overflow-hidden"><div class=p-6><div class="text-sm text-gray-500"><time datetime=2018-05-26>26 May 2018
</time><time datetime=2018-05-26>• updated 26 May 2018</time></div><h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4 leading-tight">null, Software Design, and Scala's Option</h1><div class="flex items-center justify-between mb-8 pb-6 border-b border-gray-200"><div class="flex flex-wrap gap-2 mb-4"><a href=/tags/scala class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Scala
</a><a href=/tags/software-development class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Software Development
</a><a href=/tags/null class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">null
</a><a href=/tags/typescript class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">TypeScript
</a><a href=/tags/go class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Go
</a><a href=/tags/golang class="bg-gray-100 hover:bg-teal-100 text-gray-700 hover:text-teal-800 px-3 py-1 rounded-full text-sm font-medium transition-colors duration-200 cursor-pointer">Golang</a></div></div><div class="prose prose-lg max-w-none"><p>For the past year or so I&rsquo;ve been writing a lot of Scala and fallen in love with its <code>Option</code> type and how it allows me to avoid <code>null</code>s. I reflected on <code>null</code>, why they are bad, and how optional types allow you to write more expressive code.</p><h2 id=what-is-null>What is null?</h2><p>Most programming languages have the concept of <code>null</code> (or <code>nil</code>) that represents the absence of a given value or object. At it&rsquo;s surface the absence of a value probably just translates into a pointer of value <code>0x0</code> or in languages that do not zero variables, a pointer anywhere into the memory. But aside from the implementation details the more interesting question is how <code>null</code> fits into a language&rsquo;s type system.</p><p>In pretty much every language you can define a variable or parameter of a given type and subsequently you can only assign values of compatible types. That means the same type or in some languages a sub-type. For example, in Scala:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>var</span> name<span style=color:#2c5dcd;font-weight:700>:</span> <span style=color:#5918bb;font-weight:700>String</span> <span style=color:#2c5dcd>=</span> <span style=color:#0c6>&#34;Jakob&#34;</span>
</span></span><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>var</span> number<span style=color:#2c5dcd;font-weight:700>:</span> <span style=color:#5918bb;font-weight:700>Int</span> <span style=color:#2c5dcd>=</span> <span style=color:#5918bb;font-weight:700>32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic>// Obviously this will fail:
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span>name <span style=color:#2c5dcd;font-weight:700>=</span> number
</span></span></code></pre></div><p>Nothing surprising. In statically typed languages this is an illegal move. The compiler will disapprove of your choice.</p><p>But then, surprisingly, <code>null</code> can be assigned to everything:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>var</span> name<span style=color:#2c5dcd;font-weight:700>:</span> <span style=color:#5918bb;font-weight:700>String</span> <span style=color:#2c5dcd>=</span> <span style=color:#0c6>&#34;Jakob&#34;</span>
</span></span><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>var</span> number<span style=color:#2c5dcd;font-weight:700>:</span> <span style=color:#5918bb;font-weight:700>Int</span> <span style=color:#2c5dcd>=</span> <span style=color:#5918bb;font-weight:700>32</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic>// This works:
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span>name <span style=color:#2c5dcd;font-weight:700>=</span> <span style=color:#2c5dcd;font-weight:700>null</span>
</span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic>// This also works:
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span>number <span style=color:#2c5dcd;font-weight:700>=</span> <span style=color:#2c5dcd;font-weight:700>null</span>
</span></span></code></pre></div><p>The realization that <code>null</code> is essentially a type wildcard might be trivial to some but was a bit of an epiphany to me. It&rsquo;s kind of elegant and helps developers deal with situations where they simply don&rsquo;t know what a value is. In languages where blocks are not expressions it makes writing conditional initialization of values possible without having to write helper methods.</p><h2 id=null-troubles>null Troubles</h2><p>The issue with <code>null</code> being a chameleon in the type system is problematic, not so much because it can cause the infamous <code>NullPointerException</code> in Java, but more so because it&rsquo;s essentially an incompatible type that&rsquo;s magically turned into a <em>duck</em>. You know, <em>if it quacks like a duck and walks like a duck&mldr;</em> Except, in the case of null, you don&rsquo;t get a duck, you get nothing. In most languages when you get a variable or parameter of a type <code>T</code> with a method <code>m</code> you know that you can invoke <code>m</code> on it, even if your variable is actually a sub-type of <code>T</code>. That makes reasoning about the code easy. You&rsquo;d never expect that your parameter or return value wouldn&rsquo;t let you call a method that is defined on its type unless&mldr; it&rsquo;s <code>null</code>.</p><p>This is the core of the issue with <code>null</code>. It acts like something it <em>is not</em> under the disguise of a different type. It&rsquo;s like biting into a doughnut that&rsquo;s filled with mustard instead of strawberry jam. And to continue that analogy &ndash; both because I like baked goods and because the thought of getting a mouthful of mustard when expecting something sweet perfectly captures the feeling when your app fails with a null pointer &ndash; writing code that can return <code>null</code> or uses <code>null</code> is like buying a dozen doughnuts where some <em>might</em> be filled with mustard. Most of the time you&rsquo;re fine, but when you get one with mustard, you&rsquo;re going to have a bad day.</p><p>One notable exception that I know of is <code>Go</code> in which methods are selected based on the receiver type of a method, not it&rsquo;s value. You&rsquo;ll have to account for a <code>nil</code> receiver in your method:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>type</span> Foo <span style=color:#2c5dcd;font-weight:700>struct</span> {}
</span></span><span style=display:flex><span><span style=color:#ff8000;font-weight:700>def</span> (f <span style=color:#2c5dcd>*</span>Foo) <span style=color:#ff8000;font-weight:700>doSomething</span>() <span style=color:#5918bb;font-weight:700>string</span> {
</span></span><span style=display:flex><span>  <span style=color:#2c5dcd;font-weight:700>if</span> f <span style=color:#2c5dcd>==</span> <span style=color:#2c5dcd;font-weight:700>nil</span> {
</span></span><span style=display:flex><span>    <span style=color:#2c5dcd;font-weight:700>return</span> <span style=color:#0c6>&#34;called on a nil receiver&#34;</span>
</span></span><span style=display:flex><span>  } <span style=color:#2c5dcd;font-weight:700>else</span> {
</span></span><span style=display:flex><span>    <span style=color:#2c5dcd;font-weight:700>return</span> <span style=color:#0c6>&#34;called with a non-nil receiver&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>var</span> foo Foo = <span style=color:#2c5dcd;font-weight:700>nil</span>
</span></span><span style=display:flex><span>foo.<span style=color:#ff8000;font-weight:700>doSomething</span>() <span style=color:#0080ff;font-style:italic>// =&gt; &#34;called on a nil receiver&#34;</span>
</span></span></code></pre></div><p>This makes it easy to write code in Go that&rsquo;s <code>nil</code> resilient, but at the end of the day this does not solve the underlying problem. Writing all your methods like this is cumbersome and does not communicate well that something can or cannot be <code>nil</code>. And if you forget to implement your methods in this way, the compiler won&rsquo;t warn you, so essentially you&rsquo;re back to square <code>null</code>.</p><p>Fundamentally <code>null</code> is problematic because it conflates two things into a single type: the actual object from your problem domain and the idea that it might or might not be there. And sadly, the type system in most languages does not let you specify whether a type can be <code>null</code> or not. The only exception that I know of is TypeScript and typescript handles it beautifully. If <a href=https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html><code>strictNullChecks</code></a> are enabled, the TypeScript compiler won&rsquo;t allow <code>null</code> to be assigned unless the target type is a union type of <code>null</code> and the actual type:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>let</span> x: <span style=color:#5918bb;font-weight:700>number</span>;
</span></span><span style=display:flex><span>x <span style=color:#2c5dcd>=</span> <span style=color:#5918bb;font-weight:700>1</span>; <span style=color:#0080ff;font-style:italic>// this works
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span>x <span style=color:#2c5dcd>=</span> <span style=color:#2c5dcd;font-weight:700>null</span>; <span style=color:#0080ff;font-style:italic>// not allowed
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span><span style=color:#2c5dcd;font-weight:700>let</span> name: <span style=color:#5918bb;font-weight:700>number</span> <span style=color:#2c5dcd>|</span> <span style=color:#2c5dcd;font-weight:700>null</span>; <span style=color:#0080ff;font-style:italic>// name is either a number or a null
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span>name <span style=color:#2c5dcd>=</span> <span style=color:#2c5dcd;font-weight:700>null</span>; <span style=color:#0080ff;font-style:italic>// This is now valid!
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span>name <span style=color:#2c5dcd>=</span> <span style=color:#0c6>&#34;Jakob&#34;</span>;
</span></span></code></pre></div><p>I really love this concept and mentally replace any variable/parameter&rsquo;s type definition with this. Instead of <code>x: String</code> I now think <code>x: String | null</code> because it represents the reality more truthfully.</p><h2 id=scalas-optiont>Scala&rsquo;s Option[T]</h2><p>In Scala one can use the <a href=https://www.scala-lang.org/api/current/scala/Option.html><code>Option[T]</code></a> type to represent something that might be there or not. It&rsquo;s implemented as a sealed abstract class with exactly two possible implementations: <code>None</code> or <code>Some[T]</code>. If you need to represent an optional value, you define it as <code>Option[String]</code> and you&rsquo;ll get either a <code>None</code> or <code>Some</code>:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>val</span> name<span style=color:#2c5dcd;font-weight:700>:</span> <span style=color:#5918bb;font-weight:700>Option</span><span style=color:#2c5dcd>[</span><span style=color:#5918bb;font-weight:700>String</span><span style=color:#2c5dcd>]</span> <span style=color:#2c5dcd;font-weight:700>=</span> getName<span style=color:#2c5dcd>()</span>
</span></span><span style=display:flex><span>name <span style=color:#2c5dcd;font-weight:700>match</span> <span style=color:#2c5dcd>{</span>
</span></span><span style=display:flex><span>  <span style=color:#2c5dcd;font-weight:700>case</span> <span style=text-decoration:underline>Some</span><span style=color:#2c5dcd>(</span>actualName<span style=color:#2c5dcd>)</span> <span style=color:#2c5dcd;font-weight:700>=&gt;</span> println <span style=color:#0c6>s&#34;Hello, </span><span style=color:#0c6>$name</span><span style=color:#0c6>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#2c5dcd;font-weight:700>case</span> <span style=text-decoration:underline>None</span> <span style=color:#2c5dcd;font-weight:700>=&gt;</span> println <span style=color:#0c6>&#34;Who goes there?&#34;</span>
</span></span><span style=display:flex><span><span style=color:#2c5dcd>}</span>
</span></span></code></pre></div><p>Nothing fancy here, and one might argue that this is not really better than simply checking if a value is null or not:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>val</span> name<span style=color:#2c5dcd;font-weight:700>:</span> <span style=color:#5918bb;font-weight:700>String</span> <span style=color:#2c5dcd>=</span> getName<span style=color:#2c5dcd>()</span>
</span></span><span style=display:flex><span><span style=color:#2c5dcd;font-weight:700>if</span> name <span style=color:#2c5dcd>==</span> <span style=color:#2c5dcd;font-weight:700>null</span> <span style=color:#2c5dcd>{</span>  println <span style=color:#0c6>s&#34;Hello, </span><span style=color:#0c6>$name</span><span style=color:#0c6>&#34;</span> <span style=color:#2c5dcd>}</span> <span style=color:#2c5dcd;font-weight:700>else</span> <span style=color:#2c5dcd>{</span> println <span style=color:#0c6>&#34;Who goes there?&#34;</span> <span style=color:#2c5dcd>}</span>
</span></span></code></pre></div><p>But as any abstraction can be broken down into smaller parts, so can Option. And if we consider only the parts it&rsquo;s made of, there&rsquo;s clearly nothing gained. But, that&rsquo;s the thing about abstractions, they make more sense if we raise our viewpoint.</p><p>Having a method return an <code>Option</code> or a value type as such, doesn&rsquo;t change how the code has to be handled, but makes it explicit that it <em>should</em> be handled differently, both to the compiler and to the developer. If I receive an <code>Option</code> from a method or as a parameter, I know that I should check if I have nothing or something. But if I am OK with an exception, I can call <code>.get</code> on the <code>Option</code> without actually checking. With a non-Option it&rsquo;s like with the doughnuts. The more experience you have, the more defensive you program and the more you check for nulls, just like you&rsquo;d check your doughnuts for signs of mustard. But that&rsquo;s just not a good way of eating&mldr;</p><h2 id=closing-thoughts>Closing Thoughts</h2><p>I realize other languages have constructs like this as well, for example in Java 8 we now have the <a href=https://docs.oracle.com/javase/8/docs/api/java/util/Optional.html><code>Optional&lt;T></code></a> type that fulfills pretty much the same role, but only recently did I really understand the value of an optional type like this. Having seen what TypeScript&rsquo;s Union types do really opened my eyes, and now I wish all languages had this concept.</p><p>But what languages lack we have to make up for with discipline and care for the craft. So, don&rsquo;t do this:</p><div class=highlight><pre tabindex=0 style=color:#4d4d4d;background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#0080ff;font-style:italic>// Someone is going to have a bad day...
</span></span></span><span style=display:flex><span><span style=color:#0080ff;font-style:italic></span><span style=color:#2c5dcd;font-weight:700>val</span> <span style=text-decoration:underline>Option</span><span style=color:#2c5dcd>[</span><span style=color:#5918bb;font-weight:700>Day</span><span style=color:#2c5dcd>]</span> <span style=color:#2c5dcd;font-weight:700>=</span> <span style=color:#2c5dcd;font-weight:700>null</span>
</span></span></code></pre></div></div></div></article><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//ilikeorangutans.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></main><footer class="bg-white border-t mt-12"><div class="max-w-4xl mx-auto px-4 py-8"><div class="text-center text-gray-600"><p>&copy; 2025 Jakob Külzer. All rights reserved.</p><div class="mt-4 space-x-6"><a href=mailto:jakob.kuelzer@gmail.com class="hover:text-teal-600 transition-colors">Email</a>
<a href=https://github.com/ilikeorangutans target=_blank class="hover:text-teal-600 transition-colors">Github</a>
<a href=https://sr.ht/~ilikeorangutans/ target=_blank class="hover:text-teal-600 transition-colors">Sourcehut</a>
<a href=https://www.linkedin.com/in/jakobkuelzer/ target=_blank class="hover:text-teal-600 transition-colors">LinkedIn</a></div></div></div></footer></body></html>